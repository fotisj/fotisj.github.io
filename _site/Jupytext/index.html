<!DOCTYPE html>
<html>
  <head>
    <title>Jupytext – Fotis Jannidis – notes on computational literary studies</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Many people use Juypter notebooks for their data science works. But it has been pointed out repeatedly that notebooks are detrimental to developing your programming skills, because they lack important features of standard integrated development environments like visual debuggers and support for refactoring. Another problem is that the notebook format doesn’t lend itself to do meaningful diffs, because the important differences get lost between all the lines showing output. This makes it more difficult than necessary to use notebooks in a collaborative environment. Jupytext is a tool, which remedies these problems. It allows you a lossless round trip between jupyter notebooks and python scripts. One simple way to achieve this is to convert your notebook into a python script, so that you can then edit and refactor the script - and then convert the script back to a notebook. The second approach is a bit more complicated: It allows you to setup your jupyter environement in such a way, that you will save a notebook now in two (or more) formats: the usual notebook format,  as a python script and / or as a markdown file. Changes to the python script in your preferred python IDE can be now played back to the notebook just by hitting the refresh button in the browser.

" />
    <meta property="og:description" content="Many people use Juypter notebooks for their data science works. But it has been pointed out repeatedly that notebooks are detrimental to developing your programming skills, because they lack important features of standard integrated development environments like visual debuggers and support for refactoring. Another problem is that the notebook format doesn’t lend itself to do meaningful diffs, because the important differences get lost between all the lines showing output. This makes it more difficult than necessary to use notebooks in a collaborative environment. Jupytext is a tool, which remedies these problems. It allows you a lossless round trip between jupyter notebooks and python scripts. One simple way to achieve this is to convert your notebook into a python script, so that you can then edit and refactor the script - and then convert the script back to a notebook. The second approach is a bit more complicated: It allows you to setup your jupyter environement in such a way, that you will save a notebook now in two (or more) formats: the usual notebook format,  as a python script and / or as a markdown file. Changes to the python script in your preferred python IDE can be now played back to the notebook just by hitting the refresh button in the browser.

" />
    
    <meta name="author" content="Fotis Jannidis" />

    
    <meta property="og:title" content="Jupytext" />
    <meta property="twitter:title" content="Jupytext" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Fotis Jannidis - notes on computational literary studies" href="/feed.xml" />


  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://avatars2.githubusercontent.com/u/2873355?s=400&u=dc39d48d69dd7e28e0be194acdb30ca31ea55bf8&v=4" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Fotis Jannidis</a></h1>
            <p class="site-description">notes on computational literary studies</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">

  <h1>Jupytext</h1>

  <div class="entry">
    <p>Many people use Juypter notebooks for their data science works. But it has been pointed out repeatedly that notebooks are detrimental to developing your programming skills, because they lack important features of standard integrated development environments like visual debuggers and support for refactoring. Another problem is that the notebook format doesn’t lend itself to do meaningful diffs, because the important differences get lost between all the lines showing output. This makes it more difficult than necessary to use notebooks in a collaborative environment. <a href="https://github.com/mwouts/jupytext">Jupytext</a> is a tool, which remedies these problems. It allows you a lossless round trip between jupyter notebooks and python scripts. One simple way to achieve this is to convert your notebook into a python script, so that you can then edit and refactor the script - and then convert the script back to a notebook. The second approach is a bit more complicated: It allows you to setup your jupyter environement in such a way, that you will save a notebook now in two (or more) formats: the usual notebook format,  as a python script and / or as a markdown file. Changes to the python script in your preferred python IDE can be now played back to the notebook just by hitting the refresh button in the browser.</p>

<h2 id="installing-jupytext">Installing jupytext</h2>

<p>jupytext supports Python 2.7 and 3.4+ and it can be installed either using pip:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install jupytext --upgrade
</code></pre></div></div>

<p>or conda-forge:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda install -c conda-forge jupytext
</code></pre></div></div>

<h2 id="command-line-conversion">Command line conversion</h2>

<p>Marc Wouts, the creator of jupytext, has developed his own format, called ‘light’, to make the seamless roundtrip possible, only to discover later on that there is already a suitable format which has been invented by Sphinx and is now supported by many Python IDEs (for example PyCharm), which he calls ‘percent’. Jupytext now supports both format.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupytext --to python notebook.ipynb 
</code></pre></div></div>

<p>This will create a python file in the light format. The python version doesn’t keep the output of the code cells in the notebook. To create a python file in the percent format, use this command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupytext --to py:percent notebook.ipynb
</code></pre></div></div>

<p>To convert the changed python file back to a notebook file you invoke:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupytext --to notebook notebook.py
</code></pre></div></div>

<p>Using the last command will overwrite the old notebook. But if you want to preserve the old output, you can use the following command, which will keep the old output and only remove the output from those cells where the code has been changed:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupytext --to notebook --update notebook.ipynb 
</code></pre></div></div>

<h2 id="on-the-fly-conversion">On the fly conversion</h2>

<p>The very useful on-the-fly conversion, which basically always keeps two or more versions of your notebook around, is a bit more complicated to set up.</p>

<h3 id="first-step-activate-the-jupytext-content-manager-in-juypter">First step: Activate the jupytext content manager in Juypter</h3>

<p>You have to find your jupyter configuration file: jupyter_notebook_config.py. Usually It is in your home directory in a directory called .jupyter. Add this as one line at the end:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c.NotebookApp.contents_manager_class = "jupytext.TextFileContentsManager"
</code></pre></div></div>
<p>You may also want to add this line, because it sets the percent format as the default.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c.ContentsManager.preferred_jupytext_formats_save = "py:percent"
</code></pre></div></div>
<p>Restart Jupyter so the changes can take effect.</p>

<h3 id="second-step-edit-the-metadata-of-the-notebook">Second step: Edit the Metadata of the Notebook</h3>
<p>Now you have to edit the metadata of your jupyter notebook either in a text editor - which is error-prone because of its JSON format - or you edit them using in jupyter notebook the menu item: ‘Edit-&gt; Edit Notebook Metadata’. Here you enter something like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"jupytext": {
    "formats": "ipynb, py"
  }
</code></pre></div></div>
<p>I expect we soon will see a jupyter extension to automate the edit of the metadata. - Next time you save the notebook, the python file will be created. The cool thing is: Now you can change the python file, reload the notebook (just hit the reload button in your browser) and the changes will be reflected in the notebook. And vice versa: changes in the notebook will also show in the python version.</p>

<p>Marc Wouts created a nice gif,  which shows the whole process:</p>

<p><img src="https://gist.githubusercontent.com/mwouts/13de42d8bb514e4acf6481c580feffd0/raw/b8dd28f44678f8c91f262da2381276fc4d03b00a/JupyterPyCharm.gif" alt="jupytext" title="jupytext in action" /></p>

<h2 id="interesting-aspects-of-jupytext-not-covered-here">Interesting aspects of jupytext not covered here</h2>

<ul>
  <li>How to you use jupytext for R, Julia and other formats</li>
  <li>How to configure the Content Manager, so that some metadata of cells are not preserved</li>
  <li>How to test whether a round-trip conversion works</li>
</ul>


  </div>

  <div class="date">
    Published 12.01.2019
  </div>


</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
        </footer>
      </div>
    </div>

  </body>
</html>
